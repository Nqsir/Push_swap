# **************************************************************************** #
#                                                           LE - /             #
#                                                               /              #
#    Makefile                                         .::    .:/ .      .::    #
#                                                  +:+:+   +:    +:  +:+:+     #
#    By: vsteyaer <marvin@le-101.fr>                +:+   +:    +:    +:+      #
#                                                  #+#   #+    #+    #+#       #
#    Created: 2018/06/23 11:12:37 by vsteyaer     #+#   ##    ##    #+#        #
#    Updated: 2018/06/29 18:46:54 by vsteyaer    ###    #+. /#+    ###.fr      #
#                                                          /                   #
#                                                         /                    #
# **************************************************************************** #

NAME = ../push_swap

FLAGS = -Wall -Wextra -Werror

DIR_SRC = ./srcs/
DIR_INC = ./includes/
DIR_OBJ = ./objs/
DIR_LIBFT = ../libft/

INC = ./includes/push_swap.h

SRC_FILES = check.c \
			create.c \
			main.c \
			print.c \
			push.c \
			rotate.c \
			sort_type_1.c \
			sort_type_2.c \
			sort_type_3.c \
			swap.c \
			utils.c\
			opti_mvt.c

SRC = $(addprefix $(DIR_SRC), $(SRC_FILES))
OBJ = $(addprefix $(DIR_OBJ), $(SRC_FILES:.c=.o))
LIBFT = $(addprefix $(DIR_LIBFT), libft.a)
LIB = -L $(DIR_LIBFT) -lft

all: $(NAME)

$(NAME): $(DIR_OBJ) $(LIBFT) $(OBJ)
	@printf "Compilation of \033[1m$@\033[0m ...‚åõÔ∏è  \n"
	@gcc $(OBJ) $(LIB) -o $(NAME)
	@echo " üíé üíé üíé  EXECUTABLE PUSH_SWAP CREATED üíé üíé üíé  "

$(DIR_OBJ):
	@mkdir -p $(DIR_OBJ)

$(LIBFT):
	@printf " Compilation of \033[1m$@\033[0m ... ‚åõÔ∏è "
	@make -C $(DIR_LIBFT)
	@echo "\n üíØ üíØ üíØ  LIBFT COMPILED IN PUSH_SWAP_FILES üíØ üíØ üíØ  \n"

$(DIR_OBJ)%.o:$(DIR_SRC)%.c $(INC)
	@gcc $(FLAGS) -I $(DIR_LIBFT) -I $(DIR_INC) -o $@ -c $<

clean:
	@rm -Rf $(DIR_OBJ)
	@make -C $(DIR_LIBFT) clean
	@echo "\n ‚ùå ‚ùå ‚ùå  PUSH_SWAP OBJS DELETED ‚ùå ‚ùå ‚ùå  \n"

fclean: clean
	@rm -f $(NAME)
	@make -C $(DIR_LIBFT) fclean
	@echo "\n ‚ö†Ô∏è ‚ö†Ô∏è ‚ö†Ô∏è  PUSH_SWAP EXECUTABLE DELETED ‚ö†Ô∏è ‚ö†Ô∏è ‚ö†Ô∏è  \n"

re: fclean all

.PHONY: all clean fclean re
